{
  "version": "1.0",
  "repository": "current",
  "protection_rules": {
    "main": {
      "require_pr": true,
      "require_reviews": 1,
      "dismiss_stale_reviews": true,
      "require_status_checks": [
        "Code Quality Analysis",
        "Security Scanning",
        "Test Coverage",
        "Performance Testing",
        "RIF Validation"
      ],
      "require_up_to_date": true,
      "allow_auto_merge": true,
      "delete_branch_on_merge": true,
      "restrict_pushes": true,
      "allow_force_pushes": false,
      "allow_deletions": false
    }
  },
  "branches": {
    "main": {
      "protection": {
        "required_status_checks": {
          "strict": true,
          "contexts": [
            "Code Quality Analysis",
            "Security Scanning",
            "Test Coverage",
            "Performance Testing",
            "RIF Validation"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": {
          "required_approving_review_count": 1,
          "dismiss_stale_reviews": true,
          "require_code_owner_reviews": false,
          "dismissal_restrictions": {},
          "bypass_pull_request_allowances": {}
        },
        "restrictions": null,
        "required_linear_history": false,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "block_creations": false,
        "required_conversation_resolution": true,
        "lock_branch": false,
        "allow_fork_syncing": true
      },
      "progressive_activation": {
        "enabled": true,
        "steps": [
          {
            "name": "Phase 1: Basic Protection",
            "rules": [
              "require_pr",
              "require_reviews"
            ],
            "wait_hours": 0
          },
          {
            "name": "Phase 2: Status Checks",
            "rules": [
              "require_status_checks",
              "require_up_to_date"
            ],
            "wait_hours": 24
          },
          {
            "name": "Phase 3: Advanced Features",
            "rules": [
              "allow_auto_merge",
              "delete_branch_on_merge"
            ],
            "wait_hours": 48
          }
        ]
      }
    }
  },
  "emergency_procedures": {
    "override_enabled": true,
    "override_roles": ["admin", "owner"],
    "override_audit_log": ".github/branch-protection-emergency-log.json",
    "rollback_script": "scripts/rollback_branch_protection.py",
    "emergency_contacts": [
      "PMI-CAL"
    ],
    "override_reasons": [
      "critical_security_patch",
      "emergency_hotfix",
      "system_outage_recovery",
      "deployment_blocker"
    ]
  },
  "monitoring": {
    "audit_enabled": true,
    "audit_log_path": ".github/branch-protection-audit.json",
    "metrics_collection": true,
    "alerts": {
      "protection_disabled": true,
      "emergency_override_used": true,
      "repeated_failures": true
    }
  },
  "metadata": {
    "created": "2025-08-24T00:00:00Z",
    "created_by": "RIF-Implementer",
    "issue": "203",
    "last_updated": "2025-08-24T00:00:00Z",
    "version_history": [
      {
        "version": "1.0",
        "date": "2025-08-24T00:00:00Z",
        "changes": "Initial configuration for GitHub branch protection rules",
        "agent": "RIF-Implementer"
      }
    ]
  }
}